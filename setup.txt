103.78.3.30
EeA!p2(@oZ7gK4-3

sudo apt update
sudo apt install -y nginx certbot python3-certbot-nginx git wget unzip

sudo mkdir -p /etc/nginx/ssl
sudo openssl req -x509 -nodes -days 365 \
  -newkey rsa:2048 \
  -keyout /etc/nginx/ssl/selfsigned.key \
  -out /etc/nginx/ssl/selfsigned.crt \
  -subj "/CN=$(curl -s ifconfig.me)"

sudo vi /etc/nginx/sites-available/pose
server {
    listen 443 ssl;
    server_name _;

    ssl_certificate /etc/nginx/ssl/selfsigned.crt;
    ssl_certificate_key /etc/nginx/ssl/selfsigned.key;

    location / {
        proxy_pass http://0.0.0.0:5000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
    }
}

server {
    listen 80;
    server_name _;
    return 301 https://$host$request_uri;
}

git clone https://github.com/open-mmlab/mmpose.git
scp main.py, requirements.txt
scp pose.service -> /etc/systemd/system/
pip install -r requirements.txt
sudo systemctl start pose.service

sudo ln -s /etc/nginx/sites-available/pose /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl start nginx
journalctl -u pose.service -f

